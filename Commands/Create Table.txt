

CREATE TABLE IF NOT EXISTS BANK (
BANK_CODE CHAR(8) NOT NULL,
BANK_NAME VARCHAR(30) NOT NULL,
BANK_ADDRESS VARCHAR(100) NOT NULL,
PRIMARY KEY(BANK_CODE) 
);


CREATE TABLE IF NOT EXISTS BRANCH(
BRANCH_CODE CHAR(8) NOT NULL,
BRANCH_ADDRESS VARCHAR(100) NOT NULL,
BANK_CODE CHAR(8) NOT NULL,
PRIMARY KEY(BRANCH_CODE),
FOREIGN KEY (BANK_CODE) REFERENCES BANK(BANK_CODE) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS EMPLOYEE (
EMP_ID CHAR (7) NOT NULL,
EMP_FNAME VARCHAR(20),
EMP_LNAME VARCHAR(20),
EMP_POSITION VARCHAR(20),
BRANCH_CODE CHAR(8) NOT NULL,
PRIMARY KEY (EMP_ID),
FOREIGN KEY (BRANCH_CODE) REFERENCES BRANCH(BRANCH_CODE) ON DELETE RESTRICT ON UPDATE CASCADE

);

CREATE TABLE IF NOT EXISTS CUSTOMER (
CUST_ID CHAR(12) NOT NULL,
CUST_FNAME VARCHAR(20) NOT NULL,
CUST_LNAME VARCHAR(20) NOT NULL,
CUST_ADDRESS VARCHAR(100) NOT NULL,
CONTACT_NO CHAR(10) NOT NULL,
EMAIL VARCHAR(40),
CUST_TYPE VARCHAR(20),
BRANCH_CODE CHAR(8) NOT NULL,
EMP_ID CHAR (7) NOT NULL,
PRIMARY KEY (CUST_ID),
FOREIGN KEY (BRANCH_CODE) REFERENCES BRANCH(BRANCH_CODE) ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS ACCOUNT (
ACC_NO CHAR(10) NOT NULL,
ACC_NAME VARCHAR(30) NOT NULL,
BALANCE DECIMAL(12,2) NOT NULL,
ACC_STATUS VARCHAR(15),
ACC_TYPE VARCHAR(20),
CUST_ID CHAR(12) NOT NULL,
BRANCH_CODE CHAR(8) NOT NULL,
PRIMARY KEY (ACC_NO),
FOREIGN KEY (CUST_ID) REFERENCES CUSTOMER(CUST_ID) ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY (BRANCH_CODE) REFERENCES BRANCH(BRANCH_CODE) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS TRANSACTIONS (
REFERENCE_NO CHAR(9) NOT NULL,
RECEPIENT_NAME VARCHAR(30) NOT NULL,
TRANSACTION_AMOUNT DECIMAL (12,2) NOT NULL,
TRANSACTION_DATE DATE NOT NULL,
ACC_NO CHAR(10) NOT NULL,
PRIMARY KEY (REFERENCE_NO),
FOREIGN KEY (ACC_NO) REFERENCES ACCOUNT(ACC_NO) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS LOAN(
LOAN_ID CHAR(17) NOT NULL,
INTEREST_RATE DECIMAL(5,2) NOT NULL,
LOAN_TYPE VARCHAR(20),
LOAN_PERIOD INTEGER NOT NULL,
LOAN_AMOUNT DECIMAL(12,2) NOT NULL,
CUST_ID CHAR(12) NOT NULL,
PRIMARY KEY (LOAN_ID),
FOREIGN KEY (CUST_ID) REFERENCES CUSTOMER(CUST_ID) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS OWNERSHIP(
ACC_NO CHAR(10) NOT NULL,
CUST_ID CHAR(12) NOT NULL,
DATE_CREATED DATE,
PRIMARY KEY (ACC_NO, CUST_ID),
FOREIGN KEY (ACC_NO) REFERENCES ACCOUNT(ACC_NO),
FOREIGN KEY (CUST_ID) REFERENCES CUSTOMER(CUST_ID) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS LOAN_APP (
LOAN_ID CHAR(17) NOT NULL,
CUST_ID CHAR(12) NOT NULL,
DATE_BORROWED DATE,
FOREIGN KEY (LOAN_ID) REFERENCES LOAN(LOAN_ID),
FOREIGN KEY (CUST_ID) REFERENCES CUSTOMER(CUST_ID) ON DELETE RESTRICT ON UPDATE CASCADE
);




